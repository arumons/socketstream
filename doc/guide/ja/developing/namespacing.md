### 名前空間（クライアントサイドのコードと共有コード）

JavaScriptベースの Webアプリ開発というエキサイティングな世界には、ファイルをどこに配置して、プロジェクトの成長に合わせてどのように構成していくのかという誰もが頭をかかえる問題があります。

SocketStream は、全てのクライアントサイドのファイルと共有ファイルを「APIツリー」に対応づけるという新しいアプローチをとっています。APIツリーはグローバル変数 `SS.client` と `SS.shared` で参照できます。サーバサイドのコードは少し異なる動作をしますが、基本的には同じです（`SS.server` で参照します）。

使い方はシンプルです。'exports.' をプリフィックスにしていないすべてのブジェクト、関数、変数は自動的にプライベートになります。'exports.' をプリフィックスにすることでそれらは APIツリーに追加され、同じ環境のあらゆるファイルからアクセスできるようになります。

たとえば /app/client/navbar.coffee というファイルを作成し、下記のコードを追加します。

``` coffee-script
areas = ['Home', 'Products', 'Contact Us']

exports.draw = ->
  areas.forEach (area) ->
    render(area)
    console.log(area + ' は既に表示されました')

render = (area) ->
  $('body').append("<li>#{area}</li>")
```
    
'exports.' をプリフィックスにしている `draw` メソッドはパブリックになるため、ブラウザのコンソールやクライアントコードのどこからでも `SS.client.navbar.draw()` メソッドを呼び出せます。`areas` 変数と `render` 関数はプライベートなので、グローバルの名前空間は汚染されません（クロージャのおかげです）。

ディレクトリがネストした名前空間や深いオブジェクトツリーもサポートしています。SocketStream は起動時に、名前空間の衝突がないかどうかチェックします。わたしたち開発チームは、APIツリーが最もクールな機能の一つだと考えています。ぜひご意見・ご感想をお寄せください。

**まめ知識** キーストロークをとことん少なくしたいなら、`SS.client` のエイリアスをつくりましょう。

``` coffee-script
window.C = SS.client

C.navbar.draw()
```
